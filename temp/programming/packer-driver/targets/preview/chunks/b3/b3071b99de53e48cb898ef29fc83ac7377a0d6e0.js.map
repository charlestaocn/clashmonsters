{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Menu/ModalWindows/AudioSettings/AudioSettingsModalWindow.ts"],"names":["Slider","_decorator","AppRoot","ModalWindow","UIButton","ccclass","property","AudioSettingsModalWindow","setup","soundVolumeSlider","progress","Instance","AudioPlayer","SoundVolume","musicVolumeSlider","MusicVolume","node","on","updateSoundVolume","updateMusicVolume","okButton","InteractedEvent","dismiss","setSoundVolume","setMusicVolume","result","userData","LiveUserData","musicVolume","soundVolume","saveUserData"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,M,OAAAA,M;AAAQC,MAAAA,U,OAAAA,U;;AACRC,MAAAA,O,iBAAAA,O;;AACAC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;OAGH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBL,U;;0CAGjBM,wB,WADZF,OAAO,CAAC,0BAAD,C,UAEHC,QAAQ,CAACN,MAAD,C,UACRM,QAAQ,CAACN,MAAD,C,UACRM,QAAQ;AAAA;AAAA,+B,2BAJb,MACaC,wBADb;AAAA;AAAA,sCACwE;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAK1DC,QAAAA,KAAK,GAAS;AACpB,eAAKC,iBAAL,CAAuBC,QAAvB,GAAkC;AAAA;AAAA,kCAAQC,QAAR,CAAiBC,WAAjB,CAA6BC,WAA/D;AACA,eAAKC,iBAAL,CAAuBJ,QAAvB,GAAkC;AAAA;AAAA,kCAAQC,QAAR,CAAiBC,WAAjB,CAA6BG,WAA/D;AAEA,eAAKN,iBAAL,CAAuBO,IAAvB,CAA4BC,EAA5B,CAA+B,OAA/B,EAAwC,KAAKC,iBAA7C,EAAgE,IAAhE;AACA,eAAKJ,iBAAL,CAAuBE,IAAvB,CAA4BC,EAA5B,CAA+B,OAA/B,EAAwC,KAAKE,iBAA7C,EAAgE,IAAhE;AAEA,eAAKC,QAAL,CAAcC,eAAd,CAA8BJ,EAA9B,CAAiC,KAAKK,OAAtC,EAA+C,IAA/C;AACH;;AAEOJ,QAAAA,iBAAiB,GAAS;AAC9B;AAAA;AAAA,kCAAQP,QAAR,CAAiBC,WAAjB,CAA6BW,cAA7B,CAA4C,KAAKd,iBAAL,CAAuBC,QAAnE;AACH;;AAEOS,QAAAA,iBAAiB,GAAS;AAC9B;AAAA;AAAA,kCAAQR,QAAR,CAAiBC,WAAjB,CAA6BY,cAA7B,CAA4C,KAAKV,iBAAL,CAAuBJ,QAAnE;AACH;;AAESY,QAAAA,OAAO,CAACG,MAAD,EAAuB;AACpC,gBAAMH,OAAN,CAAcG,MAAd;AACA,cAAMC,QAAQ,GAAG;AAAA;AAAA,kCAAQf,QAAR,CAAiBgB,YAAlC;AACAD,UAAAA,QAAQ,CAACE,WAAT,GAAuB,KAAKd,iBAAL,CAAuBJ,QAA9C;AACAgB,UAAAA,QAAQ,CAACG,WAAT,GAAuB,KAAKpB,iBAAL,CAAuBC,QAA9C;AACA;AAAA;AAAA,kCAAQC,QAAR,CAAiBmB,YAAjB;AACH;;AA7BmE,O","sourcesContent":["import { Slider, _decorator } from \"cc\";\r\nimport { AppRoot } from \"../../../AppRoot/AppRoot\";\r\nimport { ModalWindow } from \"../../../Services/ModalWindowSystem/ModalWindow\";\r\nimport { UIButton } from \"../../../Services/UI/Button/UIButton\";\r\nimport { Empty } from \"../Upgrades/UpgradesModalWindow\";\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"AudioSettingsModalWindow\")\r\nexport class AudioSettingsModalWindow extends ModalWindow<Empty, Empty> {\r\n    @property(Slider) private soundVolumeSlider: Slider;\r\n    @property(Slider) private musicVolumeSlider: Slider;\r\n    @property(UIButton) private okButton: UIButton;\r\n\r\n    protected setup(): void {\r\n        this.soundVolumeSlider.progress = AppRoot.Instance.AudioPlayer.SoundVolume;\r\n        this.musicVolumeSlider.progress = AppRoot.Instance.AudioPlayer.MusicVolume;\r\n\r\n        this.soundVolumeSlider.node.on(\"slide\", this.updateSoundVolume, this);\r\n        this.musicVolumeSlider.node.on(\"slide\", this.updateMusicVolume, this);\r\n\r\n        this.okButton.InteractedEvent.on(this.dismiss, this);\r\n    }\r\n\r\n    private updateSoundVolume(): void {\r\n        AppRoot.Instance.AudioPlayer.setSoundVolume(this.soundVolumeSlider.progress);\r\n    }\r\n\r\n    private updateMusicVolume(): void {\r\n        AppRoot.Instance.AudioPlayer.setMusicVolume(this.musicVolumeSlider.progress);\r\n    }\r\n\r\n    protected dismiss(result?: Empty): void {\r\n        super.dismiss(result);\r\n        const userData = AppRoot.Instance.LiveUserData;\r\n        userData.musicVolume = this.musicVolumeSlider.progress;\r\n        userData.soundVolume = this.soundVolumeSlider.progress;\r\n        AppRoot.Instance.saveUserData();\r\n    }\r\n}\r\n"]}