{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/Unit/Player/PlayerRegeneration.ts"],"names":["PlayerRegeneration","GameTimer","constructor","health","regenerationDelay","currentRegenerationAmount","regenerationTimer","upgrade","gameTick","deltaTime","tryFinishPeriod","heal"],"mappings":";;;yCAGaA,kB;;;;;;;;;;;;;;;;;;AAHJC,MAAAA,S,iBAAAA,S;;;;;;;oCAGID,kB,GAAN,MAAMA,kBAAN,CAAyB;AAMrBE,QAAAA,WAAW,CAACC,MAAD,EAAqBC,iBAArB,EAAgD;AAAA,eAL1DC,yBAK0D,GAL9B,CAK8B;AAAA,eAJ1DD,iBAI0D;AAAA,eAH1DE,iBAG0D,GAH3B;AAAA;AAAA,sCAAc,CAAd,CAG2B;AAAA,eAF1DH,MAE0D;AAC9D,eAAKA,MAAL,GAAcA,MAAd;AACA,eAAKC,iBAAL,GAAyBA,iBAAzB;AACH;;AAEMG,QAAAA,OAAO,GAAS;AACnB,eAAKF,yBAAL;AACA,eAAKC,iBAAL,GAAyB;AAAA;AAAA,sCAAc,KAAKF,iBAAL,GAAyB,KAAKC,yBAA5C,CAAzB;AACH;;AAEMG,QAAAA,QAAQ,CAACC,SAAD,EAA0B;AACrC,cAAI,KAAKJ,yBAAL,IAAkC,CAAtC,EAAyC;AAEzC,eAAKC,iBAAL,CAAuBE,QAAvB,CAAgCC,SAAhC;;AACA,cAAI,KAAKH,iBAAL,CAAuBI,eAAvB,EAAJ,EAA8C;AAC1C,iBAAKP,MAAL,CAAYQ,IAAZ,CAAiB,CAAjB;AACH;AACJ;;AAvB2B,O","sourcesContent":["import { GameTimer } from \"../../../Services/GameTimer\";\r\nimport { UnitHealth } from \"../UnitHealth\";\r\n\r\nexport class PlayerRegeneration {\r\n    private currentRegenerationAmount = 0;\r\n    private regenerationDelay: number;\r\n    private regenerationTimer: GameTimer = new GameTimer(0);\r\n    private health: UnitHealth;\r\n\r\n    public constructor(health: UnitHealth, regenerationDelay: number) {\r\n        this.health = health;\r\n        this.regenerationDelay = regenerationDelay;\r\n    }\r\n\r\n    public upgrade(): void {\r\n        this.currentRegenerationAmount++;\r\n        this.regenerationTimer = new GameTimer(this.regenerationDelay / this.currentRegenerationAmount);\r\n    }\r\n\r\n    public gameTick(deltaTime: number): void {\r\n        if (this.currentRegenerationAmount <= 0) return;\r\n\r\n        this.regenerationTimer.gameTick(deltaTime);\r\n        if (this.regenerationTimer.tryFinishPeriod()) {\r\n            this.health.heal(1);\r\n        }\r\n    }\r\n}\r\n"]}