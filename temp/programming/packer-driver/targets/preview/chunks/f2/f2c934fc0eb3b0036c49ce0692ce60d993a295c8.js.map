{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/ModalWIndows/GameModalLauncher.ts"],"names":["GameModalLauncher","Game","GameModalWindowTypes","constructor","modalWindowManager","player","gamePauser","upgrader","translationData","Level","LevelUpEvent","on","showLevelUpModal","pause","skillToUpgrade","showModal","LevelUp","availableUpgrades","Array","from","getAvailableUpgrades","upgradeSkill","resume","showChestModal","Chest","showPauseModal","shouldExit","Pause","Instance","exitGame"],"mappings":";;;0DAYaA,iB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AARJC,MAAAA,I,iBAAAA,I;;AAMAC,MAAAA,oB,iBAAAA,oB;;;;;;;mCAEIF,iB,GAAN,MAAMA,iBAAN,CAAwB;AACpBG,QAAAA,WAAW,CACNC,kBADM,EAENC,MAFM,EAGNC,UAHM,EAINC,QAJM,EAKNC,eALM,EAMhB;AAAA,eALUJ,kBAKV,GALUA,kBAKV;AAAA,eAJUC,MAIV,GAJUA,MAIV;AAAA,eAHUC,UAGV,GAHUA,UAGV;AAAA,eAFUC,QAEV,GAFUA,QAEV;AAAA,eADUC,eACV,GADUA,eACV;AACE,eAAKH,MAAL,CAAYI,KAAZ,CAAkBC,YAAlB,CAA+BC,EAA/B,CAAkC,KAAKC,gBAAvC,EAAyD,IAAzD;AACH;;AAEaA,QAAAA,gBAAgB,GAAkB;AAAA;;AAAA;AAC5C,YAAA,KAAI,CAACN,UAAL,CAAgBO,KAAhB;;AACA,gBAAMC,cAA2B,SAAS,KAAI,CAACV,kBAAL,CAAwBW,SAAxB,CACtC;AAAA;AAAA,8DAAqBC,OADiB,EAEtC;AAAEC,cAAAA,iBAAiB,EAAEC,KAAK,CAACC,IAAN,CAAW,KAAI,CAACZ,QAAL,CAAca,oBAAd,EAAX,CAArB;AAAuEZ,cAAAA,eAAe,EAAE,KAAI,CAACA;AAA7F,aAFsC,CAA1C;;AAIA,YAAA,KAAI,CAACD,QAAL,CAAcc,YAAd,CAA2BP,cAA3B;;AACA,YAAA,KAAI,CAACR,UAAL,CAAgBgB,MAAhB;AAP4C;AAQ/C;;AAEYC,QAAAA,cAAc,GAAkB;AAAA;;AAAA;AACzC,YAAA,MAAI,CAACjB,UAAL,CAAgBO,KAAhB;;AACA,gBAAMC,cAA2B,SAAS,MAAI,CAACV,kBAAL,CAAwBW,SAAxB,CACtC;AAAA;AAAA,8DAAqBS,KADiB,EAEtC;AAAEP,cAAAA,iBAAiB,EAAEC,KAAK,CAACC,IAAN,CAAW,MAAI,CAACZ,QAAL,CAAca,oBAAd,EAAX,CAArB;AAAuEZ,cAAAA,eAAe,EAAE,MAAI,CAACA;AAA7F,aAFsC,CAA1C;;AAIA,YAAA,MAAI,CAACD,QAAL,CAAcc,YAAd,CAA2BP,cAA3B;;AACA,YAAA,MAAI,CAACR,UAAL,CAAgBgB,MAAhB;AAPyC;AAQ5C;;AAEYG,QAAAA,cAAc,GAAkB;AAAA;;AAAA;AACzC,YAAA,MAAI,CAACnB,UAAL,CAAgBO,KAAhB;;AACA,gBAAMa,UAAU,SAAS,MAAI,CAACtB,kBAAL,CAAwBW,SAAxB,CAA+D;AAAA;AAAA,8DAAqBY,KAApF,EAA2F,MAAI,CAACvB,kBAAhG,CAAzB;;AAEA,gBAAIsB,UAAJ,EAAgB;AACZ;AAAA;AAAA,gCAAKE,QAAL,CAAcC,QAAd;AACH,aAFD,MAEO;AACH,cAAA,MAAI,CAACvB,UAAL,CAAgBgB,MAAhB;AACH;AARwC;AAS5C;;AAxC0B,O","sourcesContent":["import { MenuModalWindowTypes } from \"../../Menu/ModalWindows/MenuModalWindowTypes\";\r\nimport { Empty } from \"../../Menu/ModalWindows/Upgrades/UpgradesModalWindow\";\r\nimport { ModalWindowManager } from \"../../Services/ModalWindowSystem/ModalWindowManager\";\r\nimport { TranslationData } from \"../Data/TranslationData\";\r\nimport { Game } from \"../Game\";\r\nimport { Pauser } from \"../Pauser\";\r\nimport { LevelUpModalWindowParams } from \"../UI/LevelUpWindow/LevelUpModalWindow\";\r\nimport { Player } from \"../Unit/Player/Player\";\r\nimport { Upgrader } from \"../Upgrades/Upgrader\";\r\nimport { UpgradeType } from \"../Upgrades/UpgradeType\";\r\nimport { GameModalWindowTypes } from \"./GameModalWindowTypes\";\r\n\r\nexport class GameModalLauncher {\r\n    public constructor(\r\n        private modalWindowManager: ModalWindowManager,\r\n        private player: Player,\r\n        private gamePauser: Pauser,\r\n        private upgrader: Upgrader,\r\n        private translationData: TranslationData\r\n    ) {\r\n        this.player.Level.LevelUpEvent.on(this.showLevelUpModal, this);\r\n    }\r\n\r\n    private async showLevelUpModal(): Promise<void> {\r\n        this.gamePauser.pause();\r\n        const skillToUpgrade: UpgradeType = await this.modalWindowManager.showModal<LevelUpModalWindowParams, UpgradeType>(\r\n            GameModalWindowTypes.LevelUp,\r\n            { availableUpgrades: Array.from(this.upgrader.getAvailableUpgrades()), translationData: this.translationData }\r\n        );\r\n        this.upgrader.upgradeSkill(skillToUpgrade);\r\n        this.gamePauser.resume();\r\n    }\r\n\r\n    public async showChestModal(): Promise<void> {\r\n        this.gamePauser.pause();\r\n        const skillToUpgrade: UpgradeType = await this.modalWindowManager.showModal<LevelUpModalWindowParams, UpgradeType>(\r\n            GameModalWindowTypes.Chest,\r\n            { availableUpgrades: Array.from(this.upgrader.getAvailableUpgrades()), translationData: this.translationData }\r\n        );\r\n        this.upgrader.upgradeSkill(skillToUpgrade);\r\n        this.gamePauser.resume();\r\n    }\r\n\r\n    public async showPauseModal(): Promise<void> {\r\n        this.gamePauser.pause();\r\n        const shouldExit = await this.modalWindowManager.showModal<ModalWindowManager, boolean>(GameModalWindowTypes.Pause, this.modalWindowManager);\r\n\r\n        if (shouldExit) {\r\n            Game.Instance.exitGame();\r\n        } else {\r\n            this.gamePauser.resume();\r\n        }\r\n    }\r\n}\r\n"]}