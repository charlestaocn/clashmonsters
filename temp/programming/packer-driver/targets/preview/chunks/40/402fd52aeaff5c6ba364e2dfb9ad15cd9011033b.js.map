{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/Unit/UnitHealth.ts"],"names":["UnitHealth","Signal","constructor","maxHealth","healthPoints","maxHealthPoints","healthPointsChangeEvent","IsAlive","HealthPoints","MaxHealthPoints","HealthPointsChangeEvent","heal","points","Math","min","trigger","damage","setMaxHealth"],"mappings":";;;sCAGaA,U;;;;;;;;;;;;;;;;;;AAFJC,MAAAA,M,iBAAAA,M;;;;;;;4BAEID,U,GAAN,MAAMA,UAAN,CAAiB;AAKbE,QAAAA,WAAW,CAACC,SAAD,EAAoB;AAAA,eAJ9BC,YAI8B;AAAA,eAH9BC,eAG8B;AAAA,eAF9BC,uBAE8B,GAFY;AAAA;AAAA,iCAEZ;AAClC,eAAKD,eAAL,GAAuBF,SAAvB;AACA,eAAKC,YAAL,GAAoBD,SAApB;AACH;;AAEiB,YAAPI,OAAO,GAAY;AAC1B,iBAAO,IAAI,KAAKH,YAAhB;AACH;;AAEsB,YAAZI,YAAY,GAAW;AAC9B,iBAAO,KAAKJ,YAAZ;AACH;;AACyB,YAAfK,eAAe,GAAW;AACjC,iBAAO,KAAKJ,eAAZ;AACH;;AAEiC,YAAvBK,uBAAuB,GAAoB;AAClD,iBAAO,KAAKJ,uBAAZ;AACH;;AAEMK,QAAAA,IAAI,CAACC,MAAD,EAAuB;AAC9B,eAAKR,YAAL,GAAoBS,IAAI,CAACC,GAAL,CAAS,KAAKT,eAAd,EAA+B,KAAKD,YAAL,GAAoBQ,MAAnD,CAApB;AACA,eAAKN,uBAAL,CAA6BS,OAA7B,CAAqCH,MAArC;AACH;;AAEMI,QAAAA,MAAM,CAACJ,MAAD,EAAuB;AAChC,eAAKR,YAAL,IAAqBQ,MAArB;AACA,eAAKN,uBAAL,CAA6BS,OAA7B,CAAqC,CAACH,MAAtC;AACH;;AAEMK,QAAAA,YAAY,CAACd,SAAD,EAA0B;AACzC,eAAKE,eAAL,GAAuBF,SAAvB;AACH;;AArCmB,O","sourcesContent":["import { ISignal } from \"../../Services/EventSystem/ISignal\";\r\nimport { Signal } from \"../../Services/EventSystem/Signal\";\r\n\r\nexport class UnitHealth {\r\n    private healthPoints: number;\r\n    private maxHealthPoints: number;\r\n    private healthPointsChangeEvent: Signal<number> = new Signal<number>();\r\n\r\n    public constructor(maxHealth: number) {\r\n        this.maxHealthPoints = maxHealth;\r\n        this.healthPoints = maxHealth;\r\n    }\r\n\r\n    public get IsAlive(): boolean {\r\n        return 0 < this.healthPoints;\r\n    }\r\n\r\n    public get HealthPoints(): number {\r\n        return this.healthPoints;\r\n    }\r\n    public get MaxHealthPoints(): number {\r\n        return this.maxHealthPoints;\r\n    }\r\n\r\n    public get HealthPointsChangeEvent(): ISignal<number> {\r\n        return this.healthPointsChangeEvent;\r\n    }\r\n\r\n    public heal(points: number): void {\r\n        this.healthPoints = Math.min(this.maxHealthPoints, this.healthPoints + points);\r\n        this.healthPointsChangeEvent.trigger(points);\r\n    }\r\n\r\n    public damage(points: number): void {\r\n        this.healthPoints -= points;\r\n        this.healthPointsChangeEvent.trigger(-points);\r\n    }\r\n\r\n    public setMaxHealth(maxHealth: number): void {\r\n        this.maxHealthPoints = maxHealth;\r\n    }\r\n}\r\n"]}