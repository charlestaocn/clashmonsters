{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/Input/KeyboardInput.ts"],"names":["KeyboardInput","Input","input","Vec2","constructor","up","down","left","right","xAxis","yAxis","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","getAxis","normalize","event","keyCode"],"mappings":";;;mGAGaA,a;;;;;;;;;;;;;;;AAHWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAgBC,MAAAA,I,OAAAA,I;;;;;;;;;+BAGlCH,a,GAAN,MAAMA,aAAN,CAAsC;AASlCI,QAAAA,WAAW,CAACC,EAAD,EAAcC,IAAd,EAA6BC,IAA7B,EAA4CC,KAA5C,EAA4D;AAAA,eARtEC,KAQsE,GAR9D,CAQ8D;AAAA,eAPtEC,KAOsE,GAP9D,CAO8D;AAAA,eALtEL,EAKsE;AAAA,eAJtEC,IAIsE;AAAA,eAHtEC,IAGsE;AAAA,eAFtEC,KAEsE;AAC1E,eAAKH,EAAL,GAAUA,EAAV;AACA,eAAKC,IAAL,GAAYA,IAAZ;AACA,eAAKC,IAAL,GAAYA,IAAZ;AACA,eAAKC,KAAL,GAAaA,KAAb;AAEAN,UAAAA,KAAK,CAACS,EAAN,CAASV,KAAK,CAACW,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACAZ,UAAAA,KAAK,CAACS,EAAN,CAASV,KAAK,CAACW,SAAN,CAAgBG,MAAzB,EAAiC,KAAKC,OAAtC,EAA+C,IAA/C;AACH;;AAEMC,QAAAA,OAAO,GAAS;AACnB,iBAAO,IAAId,IAAJ,CAAS,KAAKM,KAAd,EAAqB,KAAKC,KAA1B,EAAiCQ,SAAjC,EAAP;AACH;;AAEOJ,QAAAA,SAAS,CAACK,KAAD,EAA6B;AAC1C,kBAAQA,KAAK,CAACC,OAAd;AACI,iBAAK,KAAKf,EAAV;AACI,mBAAKK,KAAL,GAAa,CAAb;AACA;;AACJ,iBAAK,KAAKJ,IAAV;AACI,mBAAKI,KAAL,GAAa,CAAC,CAAd;AACA;;AACJ,iBAAK,KAAKH,IAAV;AACI,mBAAKE,KAAL,GAAa,CAAC,CAAd;AACA;;AACJ,iBAAK,KAAKD,KAAV;AACI,mBAAKC,KAAL,GAAa,CAAb;AACA;AAZR;AAcH;;AAEOO,QAAAA,OAAO,CAACG,KAAD,EAA6B;AACxC,kBAAQA,KAAK,CAACC,OAAd;AACI,iBAAK,KAAKf,EAAV;AACI,mBAAKK,KAAL,GAAa,KAAKA,KAAL,KAAe,CAAf,GAAmB,CAAnB,GAAuB,KAAKA,KAAzC;AACA;;AACJ,iBAAK,KAAKJ,IAAV;AACI,mBAAKI,KAAL,GAAa,KAAKA,KAAL,KAAe,CAAC,CAAhB,GAAoB,CAApB,GAAwB,KAAKA,KAA1C;AACA;;AACJ,iBAAK,KAAKH,IAAV;AACI,mBAAKE,KAAL,GAAa,KAAKA,KAAL,KAAe,CAAC,CAAhB,GAAoB,CAApB,GAAwB,KAAKA,KAA1C;AACA;;AACJ,iBAAK,KAAKD,KAAV;AACI,mBAAKC,KAAL,GAAa,KAAKA,KAAL,KAAe,CAAf,GAAmB,CAAnB,GAAuB,KAAKA,KAAzC;AACA;AAZR;AAcH;;AAvDwC,O","sourcesContent":["import { EventKeyboard, Input, input, KeyCode, Vec2 } from \"cc\";\r\nimport { IInput } from \"./IInput\";\r\n\r\nexport class KeyboardInput implements IInput {\r\n    private xAxis = 0;\r\n    private yAxis = 0;\r\n\r\n    private up: KeyCode;\r\n    private down: KeyCode;\r\n    private left: KeyCode;\r\n    private right: KeyCode;\r\n\r\n    public constructor(up: KeyCode, down: KeyCode, left: KeyCode, right: KeyCode) {\r\n        this.up = up;\r\n        this.down = down;\r\n        this.left = left;\r\n        this.right = right;\r\n\r\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    public getAxis(): Vec2 {\r\n        return new Vec2(this.xAxis, this.yAxis).normalize();\r\n    }\r\n\r\n    private onKeyDown(event: EventKeyboard): void {\r\n        switch (event.keyCode) {\r\n            case this.up:\r\n                this.yAxis = 1;\r\n                break;\r\n            case this.down:\r\n                this.yAxis = -1;\r\n                break;\r\n            case this.left:\r\n                this.xAxis = -1;\r\n                break;\r\n            case this.right:\r\n                this.xAxis = 1;\r\n                break;\r\n        }\r\n    }\r\n\r\n    private onKeyUp(event: EventKeyboard): void {\r\n        switch (event.keyCode) {\r\n            case this.up:\r\n                this.yAxis = this.yAxis === 1 ? 0 : this.yAxis;\r\n                break;\r\n            case this.down:\r\n                this.yAxis = this.yAxis === -1 ? 0 : this.yAxis;\r\n                break;\r\n            case this.left:\r\n                this.xAxis = this.xAxis === -1 ? 0 : this.xAxis;\r\n                break;\r\n            case this.right:\r\n                this.xAxis = this.xAxis === 1 ? 0 : this.xAxis;\r\n                break;\r\n        }\r\n    }\r\n}\r\n"]}