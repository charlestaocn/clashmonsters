{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/Unit/MetaUpgrades/MetaUpgrades.ts"],"names":["MetaUpgrades","MetaUpgradeType","constructor","data","settings","upgradeTypeToValue","Map","set","Health","getBonusValue","healthLevel","health","bonuses","OverallDamage","overallDamageLevel","overallDamage","ProjectilePiercing","projectilePiercingLevel","projectilePiercing","MovementSpeed","movementSpeedLevel","movementSpeed","XPGatherer","xpGathererLevel","xpGatherer","GoldGatherer","goldGathererLevel","goldGatherer","level","length","Error","getUpgradeValue","type","has","get"],"mappings":";;;+CAIaA,Y;;;;;;;;;;;;;;;;;;;;;;AAFJC,MAAAA,e,iBAAAA,e;;;;;;;8BAEID,Y,GAAN,MAAMA,YAAN,CAAmB;AAEfE,QAAAA,WAAW,CAACC,IAAD,EAAyBC,QAAzB,EAAyD;AAAA,eADnEC,kBACmE,GAD9C,IAAIC,GAAJ,EAC8C;AACvE,eAAKD,kBAAL,CAAwBE,GAAxB,CAA4B;AAAA;AAAA,kDAAgBC,MAA5C,EAAoD,KAAKC,aAAL,CAAmBN,IAAI,CAACO,WAAxB,EAAqCN,QAAQ,CAACO,MAAT,CAAgBC,OAArD,CAApD;AACA,eAAKP,kBAAL,CAAwBE,GAAxB,CAA4B;AAAA;AAAA,kDAAgBM,aAA5C,EAA2D,KAAKJ,aAAL,CAAmBN,IAAI,CAACW,kBAAxB,EAA4CV,QAAQ,CAACW,aAAT,CAAuBH,OAAnE,CAA3D;AACA,eAAKP,kBAAL,CAAwBE,GAAxB,CACI;AAAA;AAAA,kDAAgBS,kBADpB,EAEI,KAAKP,aAAL,CAAmBN,IAAI,CAACc,uBAAxB,EAAiDb,QAAQ,CAACc,kBAAT,CAA4BN,OAA7E,CAFJ;AAIA,eAAKP,kBAAL,CAAwBE,GAAxB,CAA4B;AAAA;AAAA,kDAAgBY,aAA5C,EAA2D,KAAKV,aAAL,CAAmBN,IAAI,CAACiB,kBAAxB,EAA4ChB,QAAQ,CAACiB,aAAT,CAAuBT,OAAnE,CAA3D;AACA,eAAKP,kBAAL,CAAwBE,GAAxB,CAA4B;AAAA;AAAA,kDAAgBe,UAA5C,EAAwD,KAAKb,aAAL,CAAmBN,IAAI,CAACoB,eAAxB,EAAyCnB,QAAQ,CAACoB,UAAT,CAAoBZ,OAA7D,CAAxD;AACA,eAAKP,kBAAL,CAAwBE,GAAxB,CAA4B;AAAA;AAAA,kDAAgBkB,YAA5C,EAA0D,KAAKhB,aAAL,CAAmBN,IAAI,CAACuB,iBAAxB,EAA2CtB,QAAQ,CAACuB,YAAT,CAAsBf,OAAjE,CAA1D;AACH;;AAEOH,QAAAA,aAAa,CAACmB,KAAD,EAAgBhB,OAAhB,EAA2C;AAC5D,cAAIgB,KAAK,IAAI,CAAb,EAAgB,OAAO,CAAP;AAChB,cAAIhB,OAAO,CAACiB,MAAR,GAAiBD,KAArB,EAA4B,MAAM,IAAIE,KAAJ,CAAW,iDAAgDF,KAAM,EAAjE,CAAN;AAE5B,iBAAOhB,OAAO,CAACgB,KAAK,GAAG,CAAT,CAAd;AACH;;AAEMG,QAAAA,eAAe,CAACC,IAAD,EAAgC;AAClD,cAAI,CAAC,KAAK3B,kBAAL,CAAwB4B,GAAxB,CAA4BD,IAA5B,CAAL,EAAwC;AACpC,kBAAM,IAAIF,KAAJ,CAAU,uCAAuCE,IAAjD,CAAN;AACH;;AACD,iBAAO,KAAK3B,kBAAL,CAAwB6B,GAAxB,CAA4BF,IAA5B,CAAP;AACH;;AA1BqB,O","sourcesContent":["import { MetaUpgradesSettings } from \"../../Data/GameSettings\";\r\nimport { MetaUpgradesData } from \"../../Data/UserData\";\r\nimport { MetaUpgradeType } from \"../../Upgrades/UpgradeType\";\r\n\r\nexport class MetaUpgrades {\r\n    private upgradeTypeToValue = new Map<MetaUpgradeType, number>();\r\n    public constructor(data: MetaUpgradesData, settings: MetaUpgradesSettings) {\r\n        this.upgradeTypeToValue.set(MetaUpgradeType.Health, this.getBonusValue(data.healthLevel, settings.health.bonuses));\r\n        this.upgradeTypeToValue.set(MetaUpgradeType.OverallDamage, this.getBonusValue(data.overallDamageLevel, settings.overallDamage.bonuses));\r\n        this.upgradeTypeToValue.set(\r\n            MetaUpgradeType.ProjectilePiercing,\r\n            this.getBonusValue(data.projectilePiercingLevel, settings.projectilePiercing.bonuses)\r\n        );\r\n        this.upgradeTypeToValue.set(MetaUpgradeType.MovementSpeed, this.getBonusValue(data.movementSpeedLevel, settings.movementSpeed.bonuses));\r\n        this.upgradeTypeToValue.set(MetaUpgradeType.XPGatherer, this.getBonusValue(data.xpGathererLevel, settings.xpGatherer.bonuses));\r\n        this.upgradeTypeToValue.set(MetaUpgradeType.GoldGatherer, this.getBonusValue(data.goldGathererLevel, settings.goldGatherer.bonuses));\r\n    }\r\n\r\n    private getBonusValue(level: number, bonuses: number[]): number {\r\n        if (level <= 0) return 0;\r\n        if (bonuses.length < level) throw new Error(`Meta upgrade does not have settings for level ${level}`);\r\n\r\n        return bonuses[level - 1];\r\n    }\r\n\r\n    public getUpgradeValue(type: MetaUpgradeType): number {\r\n        if (!this.upgradeTypeToValue.has(type)) {\r\n            throw new Error(\"Does not have meta upgrade set up \" + type);\r\n        }\r\n        return this.upgradeTypeToValue.get(type);\r\n    }\r\n}\r\n"]}