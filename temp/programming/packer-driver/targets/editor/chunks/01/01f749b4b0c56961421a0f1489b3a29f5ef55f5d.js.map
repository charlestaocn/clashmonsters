{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Services/EventSystem/Signal.ts"],"names":["Signal","handlers","thisArgs","on","handler","thisArg","push","off","index","indexOf","splice","trigger","data","i","length","call"],"mappings":";;;8BAIaA,M;;;;;;;;;;;;;;;;;8EAJb;;AACA;;;wBAGaA,M,GAAN,MAAMA,MAAN,CAA6C;AAAA;AAAA,eACxCC,QADwC,GACN,EADM;AAAA,eAExCC,QAFwC,GAEtB,EAFsB;AAAA;;AAIzCC,QAAAA,EAAE,CAACC,OAAD,EAA6BC,OAA7B,EAAiD;AACtD,eAAKJ,QAAL,CAAcK,IAAd,CAAmBF,OAAnB;AACA,eAAKF,QAAL,CAAcI,IAAd,CAAmBD,OAAnB;AACH;;AACME,QAAAA,GAAG,CAACH,OAAD,EAAmC;AACzC,gBAAMI,KAAa,GAAG,KAAKP,QAAL,CAAcQ,OAAd,CAAsBL,OAAtB,CAAtB;AACA,eAAKH,QAAL,CAAcS,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACA,eAAKN,QAAL,CAAcQ,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACH;;AAEMG,QAAAA,OAAO,CAACC,IAAD,EAAgB;AAC1B;AACA,gBAAMX,QAA+B,GAAG,CAAC,GAAG,KAAKA,QAAT,CAAxC;AACA,gBAAMC,QAAe,GAAG,CAAC,GAAG,KAAKA,QAAT,CAAxB;;AAEA,eAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGZ,QAAQ,CAACa,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtCZ,YAAAA,QAAQ,CAACY,CAAD,CAAR,CAAYE,IAAZ,CAAiBb,QAAQ,CAACW,CAAD,CAAzB,EAA8BD,IAA9B;AACH;AACJ;;AAtB+C,O","sourcesContent":["// Need to capture *this*\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { ISignal } from \"./ISignal\";\r\n\r\nexport class Signal<T = void> implements ISignal<T> {\r\n    private handlers: ((data: T) => void)[] = [];\r\n    private thisArgs: any[] = [];\r\n\r\n    public on(handler: (data: T) => void, thisArg: any): void {\r\n        this.handlers.push(handler);\r\n        this.thisArgs.push(thisArg);\r\n    }\r\n    public off(handler: (data: T) => void): void {\r\n        const index: number = this.handlers.indexOf(handler);\r\n        this.handlers.splice(index, 1);\r\n        this.thisArgs.splice(index, 1);\r\n    }\r\n\r\n    public trigger(data: T): void {\r\n        // protect from trigger >> off\r\n        const handlers: ((data: T) => void)[] = [...this.handlers];\r\n        const thisArgs: any[] = [...this.thisArgs];\r\n\r\n        for (let i = 0; i < handlers.length; i++) {\r\n            handlers[i].call(thisArgs[i], data);\r\n        }\r\n    }\r\n}\r\n"]}