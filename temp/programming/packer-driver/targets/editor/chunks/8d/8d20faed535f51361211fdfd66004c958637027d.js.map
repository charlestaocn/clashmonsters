{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/AppRoot/SaveSystem.ts"],"names":["SaveSystem","sys","UserData","userDataIdentifier","save","userData","localStorage","setItem","JSON","stringify","load","data","getItem","parse","error"],"mappings":";;;8FAGaA,U;;;;;;;;;;;;;;;AAHJC,MAAAA,G,OAAAA,G;;AACAC,MAAAA,Q,iBAAAA,Q;;;;;;;;;4BAEIF,U,GAAN,MAAMA,UAAN,CAAiB;AAAA;AAAA,eACZG,kBADY,GACS,UADT;AAAA;;AAEbC,QAAAA,IAAI,CAACC,QAAD,EAA2B;AAClCJ,UAAAA,GAAG,CAACK,YAAJ,CAAiBC,OAAjB,CAAyB,KAAKJ,kBAA9B,EAAkDK,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAAlD;AACH;;AAEMK,QAAAA,IAAI,GAAa;AACpB,gBAAMC,IAAY,GAAGV,GAAG,CAACK,YAAJ,CAAiBM,OAAjB,CAAyB,KAAKT,kBAA9B,CAArB;AAEA,cAAI,CAACQ,IAAL,EAAW,OAAO;AAAA;AAAA,qCAAP;;AAEX,cAAI;AACA;AACA,mBAAiBH,IAAI,CAACK,KAAL,CAAWF,IAAX,CAAjB;AACH,WAHD,CAGE,OAAOG,KAAP,EAAc;AACZ,mBAAO;AAAA;AAAA,uCAAP;AACH;AACJ;;AAjBmB,O","sourcesContent":["import { sys } from \"cc\";\r\nimport { UserData } from \"../Game/Data/UserData\";\r\n\r\nexport class SaveSystem {\r\n    private userDataIdentifier = \"user-dse\";\r\n    public save(userData: UserData): void {\r\n        sys.localStorage.setItem(this.userDataIdentifier, JSON.stringify(userData));\r\n    }\r\n\r\n    public load(): UserData {\r\n        const data: string = sys.localStorage.getItem(this.userDataIdentifier);\r\n\r\n        if (!data) return new UserData();\r\n\r\n        try {\r\n            // TODO: the data can be corrupted if we introduce a new field in UserData\r\n            return <UserData>JSON.parse(data);\r\n        } catch (error) {\r\n            return new UserData();\r\n        }\r\n    }\r\n}\r\n"]}