{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/Unit/Enemy/BossEnemy.ts"],"names":["Animation","Collider2D","Contact2DType","_decorator","GroupType","Enemy","ccclass","property","BossEnemy","isAnimatingAttack","start","bossCollider","on","BEGIN_CONTACT","collisionBegin","END_CONTACT","collisionEnd","_selfCollider","otherCollider","group","PLAYER","animateAttack","animateMove","animation","play"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,S,OAAAA,S;AAAWC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,U,OAAAA,U;;AACtCC,MAAAA,S,iBAAAA,S;;AACAC,MAAAA,K,iBAAAA,K;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;2BAGjBK,S,WADZF,OAAO,CAAC,WAAD,C,UAEHC,QAAQ,CAACN,UAAD,C,UACRM,QAAQ,CAACP,SAAD,C,2BAHb,MACaQ,SADb;AAAA;AAAA,0BACqC;AAAA;AAAA;;AAAA;;AAAA;;AAAA,eAIzBC,iBAJyB,GAIL,KAJK;AAAA;;AAM1BC,QAAAA,KAAK,GAAS;AACjB,eAAKC,YAAL,CAAkBC,EAAlB,CAAqBV,aAAa,CAACW,aAAnC,EAAkD,KAAKC,cAAvD,EAAuE,IAAvE;AACA,eAAKH,YAAL,CAAkBC,EAAlB,CAAqBV,aAAa,CAACa,WAAnC,EAAgD,KAAKC,YAArD,EAAmE,IAAnE;AACH;;AAEOF,QAAAA,cAAc,CAACG,aAAD,EAA4BC,aAA5B,EAA6D;AAC/E,cAAIA,aAAa,CAACC,KAAd,KAAwB;AAAA;AAAA,sCAAUC,MAAtC,EAA8C;AAC1C,iBAAKC,aAAL;AACH;AACJ;;AAEOL,QAAAA,YAAY,CAACC,aAAD,EAA4BC,aAA5B,EAA6D;AAC7E,cAAIA,aAAa,CAACC,KAAd,KAAwB;AAAA;AAAA,sCAAUC,MAAtC,EAA8C;AAC1C,iBAAKE,WAAL;AACH;AACJ;;AAEOD,QAAAA,aAAa,GAAS;AAC1B,cAAI,KAAKZ,iBAAT,EAA4B;AAC5B,eAAKA,iBAAL,GAAyB,IAAzB;AACA,eAAKc,SAAL,CAAeC,IAAf,CAAoB,QAApB;AACH;;AAEOF,QAAAA,WAAW,GAAS;AACxB,cAAI,CAAC,KAAKb,iBAAV,EAA6B;AAC7B,eAAKA,iBAAL,GAAyB,KAAzB;AACA,eAAKc,SAAL,CAAeC,IAAf,CAAoB,KAApB;AACH;;AAjCgC,O","sourcesContent":["import { Animation, Collider2D, Contact2DType, _decorator } from \"cc\";\r\nimport { GroupType } from \"../../GroupType\";\r\nimport { Enemy } from \"./Enemy\";\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass(\"BossEnemy\")\r\nexport class BossEnemy extends Enemy {\r\n    @property(Collider2D) private bossCollider: Collider2D;\r\n    @property(Animation) private animation: Animation;\r\n\r\n    private isAnimatingAttack = false;\r\n\r\n    public start(): void {\r\n        this.bossCollider.on(Contact2DType.BEGIN_CONTACT, this.collisionBegin, this);\r\n        this.bossCollider.on(Contact2DType.END_CONTACT, this.collisionEnd, this);\r\n    }\r\n\r\n    private collisionBegin(_selfCollider: Collider2D, otherCollider: Collider2D): void {\r\n        if (otherCollider.group === GroupType.PLAYER) {\r\n            this.animateAttack();\r\n        }\r\n    }\r\n\r\n    private collisionEnd(_selfCollider: Collider2D, otherCollider: Collider2D): void {\r\n        if (otherCollider.group === GroupType.PLAYER) {\r\n            this.animateMove();\r\n        }\r\n    }\r\n\r\n    private animateAttack(): void {\r\n        if (this.isAnimatingAttack) return;\r\n        this.isAnimatingAttack = true;\r\n        this.animation.play(\"Attack\");\r\n    }\r\n\r\n    private animateMove(): void {\r\n        if (!this.isAnimatingAttack) return;\r\n        this.isAnimatingAttack = false;\r\n        this.animation.play(\"Run\");\r\n    }\r\n}\r\n"]}