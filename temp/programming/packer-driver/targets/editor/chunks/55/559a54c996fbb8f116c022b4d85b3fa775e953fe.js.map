{"version":3,"sources":["file:///C:/project/work/cocos/clashmonsters/assets/Scripts/Game/Unit/Enemy/EnemyMover/PeriodicFollow/PeriodicFollowMovers.ts"],"names":["PeriodicFollowMovers","PeriodicFollowTargetEnemyMover","constructor","targetNode","settings","enemyIdToMover","Map","moverSettings","set","enemyIdToAffect","followTime","waitTime","addEnemy","enemy","requireEnemyMover","get","Id","removeEnemy","gameTick","deltaTime","enemyMover","values","has","Error"],"mappings":";;;+GAMaA,oB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAFJC,MAAAA,8B,iBAAAA,8B;;;;;;;;;sCAEID,oB,GAAN,MAAMA,oBAAN,CAAkD;AAE9CE,QAAAA,WAAW,CAACC,UAAD,EAAmBC,QAAnB,EAA4D;AAAA,eADtEC,cACsE,GADrD,IAAIC,GAAJ,EACqD;;AAC1E,eAAK,MAAMC,aAAX,IAA4BH,QAA5B,EAAsC;AAClC,iBAAKC,cAAL,CAAoBG,GAApB,CACID,aAAa,CAACE,eADlB,EAEI;AAAA;AAAA,kFAAmCN,UAAnC,EAA+CI,aAAa,CAACG,UAA7D,EAAyEH,aAAa,CAACI,QAAvF,CAFJ;AAIH;AACJ;;AAEMC,QAAAA,QAAQ,CAACC,KAAD,EAAqB;AAChC,eAAKC,iBAAL,CAAuBD,KAAvB;AACA,eAAKR,cAAL,CAAoBU,GAApB,CAAwBF,KAAK,CAACG,EAA9B,EAAkCJ,QAAlC,CAA2CC,KAA3C;AACH;;AAEMI,QAAAA,WAAW,CAACJ,KAAD,EAAqB;AACnC,eAAKC,iBAAL,CAAuBD,KAAvB;AACA,eAAKR,cAAL,CAAoBU,GAApB,CAAwBF,KAAK,CAACG,EAA9B,EAAkCC,WAAlC,CAA8CJ,KAA9C;AACH;;AAEMK,QAAAA,QAAQ,CAACC,SAAD,EAA0B;AACrC,eAAK,MAAMC,UAAX,IAAyB,KAAKf,cAAL,CAAoBgB,MAApB,EAAzB,EAAuD;AACnDD,YAAAA,UAAU,CAACF,QAAX,CAAoBC,SAApB;AACH;AACJ;;AAEOL,QAAAA,iBAAiB,CAACD,KAAD,EAAqB;AAC1C,cAAI,CAAC,KAAKR,cAAL,CAAoBiB,GAApB,CAAwBT,KAAK,CAACG,EAA9B,CAAL,EAAwC;AACpC,kBAAM,IAAIO,KAAJ,CAAU,yDAAyDV,KAAK,CAACG,EAAzE,CAAN;AACH;AACJ;;AA/BoD,O","sourcesContent":["import { Node } from \"cc\";\r\nimport { PeriodicFollowMoverSettings } from \"../../../../Data/GameSettings\";\r\nimport { Enemy } from \"../../Enemy\";\r\nimport { IEnemyMover } from \"../EnemyMover\";\r\nimport { PeriodicFollowTargetEnemyMover } from \"./PeriodicFollowTargetEnemyMover\";\r\n\r\nexport class PeriodicFollowMovers implements IEnemyMover {\r\n    private enemyIdToMover = new Map<string, PeriodicFollowTargetEnemyMover>();\r\n    public constructor(targetNode: Node, settings: PeriodicFollowMoverSettings[]) {\r\n        for (const moverSettings of settings) {\r\n            this.enemyIdToMover.set(\r\n                moverSettings.enemyIdToAffect,\r\n                new PeriodicFollowTargetEnemyMover(targetNode, moverSettings.followTime, moverSettings.waitTime)\r\n            );\r\n        }\r\n    }\r\n\r\n    public addEnemy(enemy: Enemy): void {\r\n        this.requireEnemyMover(enemy);\r\n        this.enemyIdToMover.get(enemy.Id).addEnemy(enemy);\r\n    }\r\n\r\n    public removeEnemy(enemy: Enemy): void {\r\n        this.requireEnemyMover(enemy);\r\n        this.enemyIdToMover.get(enemy.Id).removeEnemy(enemy);\r\n    }\r\n\r\n    public gameTick(deltaTime: number): void {\r\n        for (const enemyMover of this.enemyIdToMover.values()) {\r\n            enemyMover.gameTick(deltaTime);\r\n        }\r\n    }\r\n\r\n    private requireEnemyMover(enemy: Enemy): void {\r\n        if (!this.enemyIdToMover.has(enemy.Id)) {\r\n            throw new Error(\"There is no periodic follow mover for enemy with id \" + enemy.Id);\r\n        }\r\n    }\r\n}\r\n"]}